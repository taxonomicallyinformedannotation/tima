<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>2 Preparing inputs • tima</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="II-preparing_files/libs/quarto-html/popper.min.js"></script><script src="II-preparing_files/libs/quarto-html/tippy.umd.min.js"></script><link href="II-preparing_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="II-preparing_files/libs/quarto-html/light-border.css" rel="stylesheet">
<script type="application/json" class="js-hypothesis-config">
  {
    "showHighlights": "always"
  }
  </script><script async="" src="https://hypothes.is/embed.js"></script><script>
    window.document.addEventListener("DOMContentLoaded", function (_event) {
      document.body.classList.add('hypothesis-enabled');
    });
  </script><link href="II-preparing_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="II-preparing_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="II-preparing_files/libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="II-preparing_files/libs/vis-9.1.0/vis-network.min.js"></script><script src="II-preparing_files/libs/visNetwork-binding-2.1.2/visNetwork.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2 Preparing inputs">
<meta property="og:image" content="https://taxonomicallyinformedannotation.github.io/tima/reference/figures/logo.svg">
<meta property="og:image:alt" content="Taxonomically Informed Metabolite Annotation">
<meta name="google-site-verification" content="Bt77rpBuC_R-0p62TWtA_ba5rvx-PuSEMv4LHg1UsOo">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tima</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.12.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/tima.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/I-gathering.html">1 Gathering everything you need</a></li>
    <li><a class="dropdown-item" href="../articles/II-preparing.html">2 Preparing inputs</a></li>
    <li><a class="dropdown-item" href="../articles/III-processing.html">3 Performing Taxonomically Informed Metabolite Annotation</a></li>
    <li><a class="dropdown-item" href="../articles/IV-benchmarking.html">4 Benchmarking Performance</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/taxonomicallyinformedannotation/tima/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>2 Preparing inputs</h1>

      <p class="author">Adriano Rutz</p>
      <p class="date">2025-07-03</p>

      <small class="dont-index">Source: <a href="https://github.com/taxonomicallyinformedannotation/tima/blob/main/vignettes/articles/II-preparing.qmd" class="external-link"><code>vignettes/articles/II-preparing.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <p>This vignette describes the main steps of the annotation process.</p>
<section class="level2"><h2 id="structural-annotations-of-your-features">Structural annotations of your features<a class="anchor" aria-label="anchor" href="#structural-annotations-of-your-features"></a>
</h2>
<p>For the moment, we support 3 different types of annotations:</p>
<!-- * [GNPS](https://gnps.ucsd.edu) -->
<ul>
<li>Internal MS<sup>1</sup> exact mass-based library search</li>
<li>Internal MS<sup>2</sup> library search (experimental and in silico)</li>
<li><a href="https://bio.informatik.uni-jena.de/software/sirius" class="external-link">SIRIUS</a></li>
</ul>
<section class="level3"><h3 id="ms1-based">MS<sup>1</sup>-based<a class="anchor" aria-label="anchor" href="#ms1-based"></a>
</h3>
<p>These annotations are of the lowest possible quality. However, they allow to annotate unusual adducts, in-source fragments thanks to different small tricks implemented. Try to really restrict the adduct list and structure-organism pairs you want to consider as possibilities explode rapidly.</p>
</section><section class="level3"><h3 id="spectral">Spectral<a class="anchor" aria-label="anchor" href="#spectral"></a>
</h3>
<p>We use the <code>spectral entropy</code> from <a href="https://doi.org/10.1038/s41592-021-01331-z" class="external-link uri">https://doi.org/10.1038/s41592-021-01331-z</a> for matching.</p>
<p>In case, a python implementation of the spectral matching steps is also available at: <a href="https://github.com/mandelbrot-project/spectral_lib_matcher" class="external-link uri">https://github.com/mandelbrot-project/spectral_lib_matcher</a>. The python version also includes other similarity measures.</p>
<!-- #### GNPS -->
<!-- We also provide an example GNPS job id, which is: `41c6068e905d482db5698ad81d145d7c` -->
<!-- Before running the corresponding code, do not forget to modify `params/user/prepare_*yourAnnotationTool*.yaml`. -->
<!-- Depending on the annotation tool you used, you can format its results using: -->
</section><section class="level3"><h3 id="fingerprint-based">Fingerprint-based<a class="anchor" aria-label="anchor" href="#fingerprint-based"></a>
</h3>
<section class="level4"><h4 id="sirius">Sirius<a class="anchor" aria-label="anchor" href="#sirius"></a>
</h4>
<p>As SIRIUS jobs are long to perform, we provide example SIRIUS workspaces (both SIRIUS 5 and 6). Note that spectral matches from SIRIUS are not supported for now. They have been generated on the 20 first lines of the example MGF with the following command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this is run on SIRIUS 6</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">sirius</span> <span class="dt">\</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>--noCite <span class="dt">\</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>--input=data/source/example_spectra_mini.mgf <span class="dt">\</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>--output=data/interim/annotations/example_sirius.sirius/ <span class="dt">\</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>--maxmz=800 <span class="dt">\</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>config <span class="dt">\</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>--AlgorithmProfile=orbitrap <span class="dt">\</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>--StructureSearchDB=BIO <span class="dt">\</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>--Timeout.secondsPerTree=10 <span class="dt">\</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>--Timeout.secondsPerInstance=10 <span class="dt">\</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>formulas <span class="dt">\</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>zodiac <span class="dt">\</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>fingerprints <span class="dt">\</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>classes <span class="dt">\</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>structures <span class="dt">\</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>denovo-structures <span class="dt">\</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>summaries <span class="dt">\</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>--chemvista <span class="dt">\</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>--feature-quality-summary <span class="dt">\</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>--full-summary</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># this is run on SIRIUS 5</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="ex">sirius</span> <span class="dt">\</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>--noCite <span class="dt">\</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>--input data/source/example_spectra_mini.mgf <span class="dt">\</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>--output data/interim/annotations/example_sirius/ <span class="dt">\</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>--maxmz 800 <span class="dt">\</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>config <span class="dt">\</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>--AlgorithmProfile orbitrap <span class="dt">\</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>--StructureSearchDB BIO <span class="dt">\</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>--Timeout.secondsPerTree 10 <span class="dt">\</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>--Timeout.secondsPerInstance 10 <span class="dt">\</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>formula <span class="dt">\</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>zodiac <span class="dt">\</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>fingerprint <span class="dt">\</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>structure <span class="dt">\</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>compound-classes <span class="dt">\</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>write-summaries <span class="dt">\</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>--full-summary</span></code></pre></div>
</div>
<p>These parameters were not optimized and were only used to give an example output. If you are using the cli, do not forget to generate the summaries with the <code>--full-summary</code> option, or if you use the gui, generate them by clicking the corresponding icon. You can get an example running:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tima</span><span class="fu">:::</span><span class="fu"><a href="../reference/get_example_sirius.html">get_example_sirius</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<p>The sirius workspace should ideally have <code>yourPattern_sirius</code> as name and be placed in <code>data/interim/annotations</code> (else it will not be found by default except you provide the right path).</p>
<p>If you want to know how we attempt to combine the CSI score with other ones, see <a href="https://github.com/taxonomicallyinformedannotation/tima/blob/main/R/transform_score_sirius_csi.R" class="external-link">R/transform_score_sirius_csi.R</a> Note that starting from SIRIUS6, the <em>approx</em> confidence score is the one considered, and not the exact one.</p>
<div class="cell">
<div class="cell-output-display">
<div class="visNetwork html-widget html-fill-item" id="htmlwidget-ec53ba22122965829b46" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ec53ba22122965829b46">{"x":{"nodes":{"name":["ann_sir_pre","ann_sir_pre_can","ann_sir_pre_for","ann_sir_pre_str","ann_spe_exp_gnp_pre","ann_spe_neg","ann_spe_pos","ann_spe_pre","input_spectra","lib_mer_str_met","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_cla","lib_mer_str_tax_npc","lib_rt","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_sop_mer_str_pro","lib_spe_exp_gnp_pre_neg","lib_spe_exp_gnp_pre_pos","lib_spe_exp_gnp_pre_sop","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre_neg","lib_spe_exp_mb_pre_pos","lib_spe_exp_mb_pre_sop","lib_spe_exp_mer_pre_neg","lib_spe_exp_mer_pre_pos","lib_spe_exp_mer_pre_sop","lib_spe_is_wik_pre_neg","lib_spe_is_wik_pre_pos","lib_spe_is_wik_pre_sop"],"type":["stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem"],"description":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"status":["uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate"],"seconds":[25.835,0.001,0,0,0.034,0.176,66.483,15.775,0.001,0,0.001,0,0,0,0.056,0,0.031,0.393,0.6909999999999999,2.954,46.433,64.88800000000001,13.21,86.934,0.8070000000000001,3.247,10.202,0.501,1.737,0,0.001,0.001,0.479,0.896,0.317,0.852,1.526,0.362,12.888,18.571,0.586],"bytes":[165,784,487,24420,237,187,255860,373115,44681,36017827,11275154,43576755,2505314,2435552,182,96,273,1334921,177466,96479839,8058153,92979778,46518841,250,90511260,154124724,481271483,1416699,155,601,601,106,7057574,19411864,480970,31540426,84936306,1190284,687328159,863950396,37904410],"branches":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["ann_sir_pre","ann_sir_pre_can","ann_sir_pre_for","ann_sir_pre_str","ann_spe_exp_gnp_pre","ann_spe_neg","ann_spe_pos","ann_spe_pre","input_spectra","lib_mer_str_met","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_cla","lib_mer_str_tax_npc","lib_rt","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_sop_mer_str_pro","lib_spe_exp_gnp_pre_neg","lib_spe_exp_gnp_pre_pos","lib_spe_exp_gnp_pre_sop","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre_neg","lib_spe_exp_mb_pre_pos","lib_spe_exp_mb_pre_sop","lib_spe_exp_mer_pre_neg","lib_spe_exp_mer_pre_pos","lib_spe_exp_mer_pre_sop","lib_spe_is_wik_pre_neg","lib_spe_is_wik_pre_pos","lib_spe_is_wik_pre_sop"],"color":["#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823"],"id":["ann_sir_pre","ann_sir_pre_can","ann_sir_pre_for","ann_sir_pre_str","ann_spe_exp_gnp_pre","ann_spe_neg","ann_spe_pos","ann_spe_pre","input_spectra","lib_mer_str_met","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_cla","lib_mer_str_tax_npc","lib_rt","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_sop_mer_str_pro","lib_spe_exp_gnp_pre_neg","lib_spe_exp_gnp_pre_pos","lib_spe_exp_gnp_pre_sop","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre_neg","lib_spe_exp_mb_pre_pos","lib_spe_exp_mb_pre_sop","lib_spe_exp_mer_pre_neg","lib_spe_exp_mer_pre_pos","lib_spe_exp_mer_pre_sop","lib_spe_is_wik_pre_neg","lib_spe_is_wik_pre_pos","lib_spe_is_wik_pre_sop"],"level":[5,6,6,6,5,3,3,5,1,4,4,4,4,4,1,2,1,1,2,1,2,1,2,3,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1],"shape":["dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot"]},"edges":{"from":["lib_mer_str_tax_cla","lib_mer_str_stereo","lib_mer_str_tax_npc","lib_mer_str_met","lib_mer_str_nam","ann_sir_pre","ann_sir_pre","ann_sir_pre","lib_mer_str_tax_cla","lib_mer_str_tax_npc","lib_mer_str_met","lib_mer_str_stereo","lib_mer_str_nam","lib_spe_exp_mer_pre_neg","input_spectra","lib_spe_exp_mb_pre_neg","lib_spe_is_wik_pre_neg","lib_spe_exp_gnp_pre_neg","lib_spe_exp_int_pre_neg","input_spectra","lib_spe_exp_mer_pre_pos","lib_spe_is_wik_pre_pos","lib_spe_exp_int_pre_pos","lib_spe_exp_mb_pre_pos","lib_spe_exp_gnp_pre_pos","ann_spe_neg","ann_spe_pos","lib_mer_str_tax_cla","lib_mer_str_stereo","lib_mer_str_tax_npc","lib_mer_str_met","lib_mer_str_nam","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_rt","lib_sop_ecm","lib_sop_hmd","lib_sop_lot","lib_sop_hmd_pre","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre_sop","lib_rt_sop","lib_spe_is_wik_pre_sop","lib_spe_exp_mer_pre_sop","lib_sop_ecm_pre","lib_spe_exp_gnp_pre_sop","lib_sop_mer_str_pro","lib_sop_clo_pre","lib_sop_lot_pre","lib_spe_exp_int_pre","lib_spe_exp_int_pre","lib_spe_exp_int_pre"],"to":["ann_sir_pre","ann_sir_pre","ann_sir_pre","ann_sir_pre","ann_sir_pre","ann_sir_pre_can","ann_sir_pre_for","ann_sir_pre_str","ann_spe_exp_gnp_pre","ann_spe_exp_gnp_pre","ann_spe_exp_gnp_pre","ann_spe_exp_gnp_pre","ann_spe_exp_gnp_pre","ann_spe_neg","ann_spe_neg","ann_spe_neg","ann_spe_neg","ann_spe_neg","ann_spe_neg","ann_spe_pos","ann_spe_pos","ann_spe_pos","ann_spe_pos","ann_spe_pos","ann_spe_pos","ann_spe_pre","ann_spe_pre","ann_spe_pre","ann_spe_pre","ann_spe_pre","ann_spe_pre","ann_spe_pre","lib_mer_str_met","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_cla","lib_mer_str_tax_npc","lib_rt_sop","lib_sop_ecm_pre","lib_sop_hmd_pre","lib_sop_lot_pre","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop"],"color":["#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"levelSeparation":500,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":8,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Regular\ntarget"],"color":["#354823","#899DA4"],"shape":["dot","dot"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Annotations are now prepared and can be used for further processing. Your features are not only informed with structural information but also, chemical class information. The latter might be corresponding <strong>or not</strong> to the chemical class of your annotated structure, depending on the consistency of your annotations.</p>
</section></section></section><section class="level2"><h2 id="chemical-class-annotation-of-your-features">Chemical class annotation of your features<a class="anchor" aria-label="anchor" href="#chemical-class-annotation-of-your-features"></a>
</h2>
<p>Within our workflow, we offer a new way to attribute chemical classes to your features. It is analog to <a href="https://ccms-ucsd.github.io/GNPSDocumentation/nap/" class="external-link">Network Annotation Propagation</a>, but uses the edges of your network instead of the clusters. This makes more sense in our view, as also recently illustrated by <a href="https://doi.org/10.1038/s41587-020-0740-8" class="external-link">CANOPUS</a>.</p>
<!-- All steps can take both manual inputs or GNPS metadata directly from your GNPS job ID. -->
<p>We are currently also working on CANOPUS integration for chemical class annotation but this implies way heavier computations and we want to offer our users a <strong>fast</strong> solution.</p>
<section class="level3"><h3 id="generating-a-network">Generating a network<a class="anchor" aria-label="anchor" href="#generating-a-network"></a>
</h3>
<p>A network is generated during the process. The edges are created based on the <code>spectral entropy similarity</code> calculated between your spectra (see <a href="https://doi.org/10.1038/s41592-021-01331-z" class="external-link uri">https://doi.org/10.1038/s41592-021-01331-z</a>).</p>
<p>If needed, you can get an example of what your minimal feature table should look like by running:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tima</span><span class="fu">::</span><span class="fu"><a href="../reference/get_example_files.html">get_example_files</a></span><span class="op">(</span>example <span class="op">=</span> <span class="st">"features"</span><span class="op">)</span></span></code></pre></div>
</div>
</section></section><section class="level2"><h2 id="biological-source-annotation">Biological source annotation<a class="anchor" aria-label="anchor" href="#biological-source-annotation"></a>
</h2>
<p>This step allows you to attribute biological source information to your features. If all your features come from a single extract, it will attribute the biological source of your extract to all your features. If you have multiple extracts aligned, it will take the <em>n</em> (according to your parameters) highest intensities of your aligned feature table and attribute the biological source of corresponding extracts. <!-- It can take both manual inputs or GNPS metadata directly from your GNPS job ID. --></p>
</section><section class="level2"><h2 id="filter-annotations-based-on-retention-time">Filter annotations (based on retention time)<a class="anchor" aria-label="anchor" href="#filter-annotations-based-on-retention-time"></a>
</h2>
<p>This step allows you to filter out the annotation of all the tools used, based on your own internal (experimental or predicted) retention times library. It is optional. If you do not have one, it will simply group the annotations of all tools.</p>
<p>You are almost there! See already all the steps accomplished!</p>
<div class="cell">
<div class="cell-output-display">
<div class="visNetwork html-widget html-fill-item" id="htmlwidget-4421f918b5647edef5cc" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-4421f918b5647edef5cc">{"x":{"nodes":{"name":["ann_fil","ann_ms1_pre","ann_ms1_pre_ann","ann_sir_pre","ann_sir_pre_str","ann_spe_exp_gnp_pre","ann_spe_neg","ann_spe_pos","ann_spe_pre","fea_pre","input_features","input_spectra","lib_mer_key","lib_mer_str_met","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_cla","lib_mer_str_tax_npc","lib_rt","lib_rt_rts","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_sop_mer_str_pro","lib_spe_exp_gnp_pre_neg","lib_spe_exp_gnp_pre_pos","lib_spe_exp_gnp_pre_sop","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre_neg","lib_spe_exp_mb_pre_pos","lib_spe_exp_mb_pre_sop","lib_spe_exp_mer_pre_neg","lib_spe_exp_mer_pre_pos","lib_spe_exp_mer_pre_sop","lib_spe_is_wik_pre_neg","lib_spe_is_wik_pre_pos","lib_spe_is_wik_pre_sop"],"type":["stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem"],"description":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"status":["uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate"],"seconds":[3.213,56.314,0,25.835,0,0.034,0.176,66.483,15.775,0.169,0,0.001,0,0,0.001,0,0,0,0.056,0.001,0,0.031,0.393,0.6909999999999999,2.954,46.433,64.88800000000001,13.21,86.934,0.8070000000000001,3.247,10.202,0.501,1.737,0,0.001,0.001,0.479,0.896,0.317,0.852,1.526,0.362,12.888,18.571,0.586],"bytes":[11662768,158,10811507,165,24420,237,187,255860,373115,95629,451549,44681,18060359,36017827,11275154,43576755,2505314,2435552,182,86,96,273,1334921,177466,96479839,8058153,92979778,46518841,250,90511260,154124724,481271483,1416699,155,601,601,106,7057574,19411864,480970,31540426,84936306,1190284,687328159,863950396,37904410],"branches":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["ann_fil","ann_ms1_pre","ann_ms1_pre_ann","ann_sir_pre","ann_sir_pre_str","ann_spe_exp_gnp_pre","ann_spe_neg","ann_spe_pos","ann_spe_pre","fea_pre","input_features","input_spectra","lib_mer_key","lib_mer_str_met","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_cla","lib_mer_str_tax_npc","lib_rt","lib_rt_rts","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_sop_mer_str_pro","lib_spe_exp_gnp_pre_neg","lib_spe_exp_gnp_pre_pos","lib_spe_exp_gnp_pre_sop","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre_neg","lib_spe_exp_mb_pre_pos","lib_spe_exp_mb_pre_sop","lib_spe_exp_mer_pre_neg","lib_spe_exp_mer_pre_pos","lib_spe_exp_mer_pre_sop","lib_spe_is_wik_pre_neg","lib_spe_is_wik_pre_pos","lib_spe_is_wik_pre_sop"],"color":["#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823"],"id":["ann_fil","ann_ms1_pre","ann_ms1_pre_ann","ann_sir_pre","ann_sir_pre_str","ann_spe_exp_gnp_pre","ann_spe_neg","ann_spe_pos","ann_spe_pre","fea_pre","input_features","input_spectra","lib_mer_key","lib_mer_str_met","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_cla","lib_mer_str_tax_npc","lib_rt","lib_rt_rts","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_sop_mer_str_pro","lib_spe_exp_gnp_pre_neg","lib_spe_exp_gnp_pre_pos","lib_spe_exp_gnp_pre_sop","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre_neg","lib_spe_exp_mb_pre_pos","lib_spe_exp_mb_pre_sop","lib_spe_exp_mer_pre_neg","lib_spe_exp_mer_pre_pos","lib_spe_exp_mer_pre_sop","lib_spe_is_wik_pre_neg","lib_spe_is_wik_pre_pos","lib_spe_is_wik_pre_sop"],"level":[7,5,6,5,6,5,3,3,5,2,1,1,4,4,4,4,4,4,1,2,2,1,1,2,1,2,1,2,3,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1],"shape":["dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot"]},"edges":{"from":["ann_ms1_pre_ann","lib_rt_rts","ann_sir_pre_str","ann_spe_exp_gnp_pre","fea_pre","ann_spe_pre","lib_mer_str_met","lib_mer_key","lib_mer_str_nam","fea_pre","lib_mer_str_stereo","lib_mer_str_tax_cla","lib_mer_str_tax_npc","ann_ms1_pre","lib_mer_str_met","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_npc","lib_mer_str_tax_cla","ann_sir_pre","lib_mer_str_met","lib_mer_str_tax_cla","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_npc","input_spectra","lib_spe_is_wik_pre_neg","lib_spe_exp_int_pre_neg","lib_spe_exp_mer_pre_neg","lib_spe_exp_mb_pre_neg","lib_spe_exp_gnp_pre_neg","lib_spe_exp_mb_pre_pos","lib_spe_exp_mer_pre_pos","lib_spe_is_wik_pre_pos","lib_spe_exp_int_pre_pos","input_spectra","lib_spe_exp_gnp_pre_pos","lib_mer_str_nam","ann_spe_neg","ann_spe_pos","lib_mer_str_stereo","lib_mer_str_met","lib_mer_str_tax_cla","lib_mer_str_tax_npc","input_features","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_rt","lib_rt","lib_sop_ecm","lib_sop_hmd","lib_sop_lot","lib_spe_is_wik_pre_sop","lib_spe_exp_int_pre_sop","lib_rt_sop","lib_spe_exp_mb_pre_sop","lib_sop_clo_pre","lib_sop_lot_pre","lib_sop_ecm_pre","lib_spe_exp_gnp_pre_sop","lib_sop_hmd_pre","lib_sop_mer_str_pro","lib_spe_exp_mer_pre_sop","lib_spe_exp_int_pre","lib_spe_exp_int_pre","lib_spe_exp_int_pre"],"to":["ann_fil","ann_fil","ann_fil","ann_fil","ann_fil","ann_fil","ann_ms1_pre","ann_ms1_pre","ann_ms1_pre","ann_ms1_pre","ann_ms1_pre","ann_ms1_pre","ann_ms1_pre","ann_ms1_pre_ann","ann_sir_pre","ann_sir_pre","ann_sir_pre","ann_sir_pre","ann_sir_pre","ann_sir_pre_str","ann_spe_exp_gnp_pre","ann_spe_exp_gnp_pre","ann_spe_exp_gnp_pre","ann_spe_exp_gnp_pre","ann_spe_exp_gnp_pre","ann_spe_neg","ann_spe_neg","ann_spe_neg","ann_spe_neg","ann_spe_neg","ann_spe_neg","ann_spe_pos","ann_spe_pos","ann_spe_pos","ann_spe_pos","ann_spe_pos","ann_spe_pos","ann_spe_pre","ann_spe_pre","ann_spe_pre","ann_spe_pre","ann_spe_pre","ann_spe_pre","ann_spe_pre","fea_pre","lib_mer_key","lib_mer_str_met","lib_mer_str_nam","lib_mer_str_stereo","lib_mer_str_tax_cla","lib_mer_str_tax_npc","lib_rt_rts","lib_rt_sop","lib_sop_ecm_pre","lib_sop_hmd_pre","lib_sop_lot_pre","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop"],"color":["#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"levelSeparation":450,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":8,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Regular\ntarget"],"color":["#354823","#899DA4"],"shape":["dot","dot"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>We now recommend you to read the <a href="https://taxonomicallyinformedannotation.github.io/tima/articles/III-processing.html">next vignette</a>.</p>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adriano Rutz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
