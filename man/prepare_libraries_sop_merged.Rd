% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_libraries_sop_merged.R
\name{prepare_libraries_sop_merged}
\alias{prepare_libraries_sop_merged}
\title{Prepare merged structure organism pairs libraries}
\usage{
prepare_libraries_sop_merged(
  files = get_params(step = "prepare_libraries_sop_merged")$files$libraries$sop$prepared,
  filter = get_params(step = "prepare_libraries_sop_merged")$organisms$filter$mode,
  level = get_params(step = "prepare_libraries_sop_merged")$organisms$filter$level,
  value = get_params(step = "prepare_libraries_sop_merged")$organisms$filter$value,
  cache = get_params(step =
    "prepare_libraries_sop_merged")$files$libraries$sop$merged$structures$processed,
  output_key = get_params(step =
    "prepare_libraries_sop_merged")$files$libraries$sop$merged$keys,
  output_org_tax_ott = get_params(step =
    "prepare_libraries_sop_merged")$files$libraries$sop$merged$organisms$taxonomies$ott,
  output_str_stereo = get_params(step =
    "prepare_libraries_sop_merged")$files$libraries$sop$merged$structures$stereo,
  output_str_met = get_params(step =
    "prepare_libraries_sop_merged")$files$libraries$sop$merged$structures$metadata,
  output_str_nam = get_params(step =
    "prepare_libraries_sop_merged")$files$libraries$sop$merged$structures$names,
  output_str_tax_cla = get_params(step =
    "prepare_libraries_sop_merged")$files$libraries$sop$merged$structures$taxonomies$cla,
  output_str_tax_npc = get_params(step =
    "prepare_libraries_sop_merged")$files$libraries$sop$merged$structures$taxonomies$npc
)
}
\arguments{
\item{files}{Character vector or list of paths to prepared library files}

\item{filter}{Logical whether to filter the merged library by taxonomy}

\item{level}{Character string taxonomic rank for filtering (kingdom, phylum,
family, genus, etc.)}

\item{value}{Character string taxon name(s) to keep (can use | for multiple,
e.g., 'Gentianaceae|Apocynaceae')}

\item{cache}{Character string path to cache directory for processed SMILES}

\item{output_key}{Character string path for output keys file}

\item{output_org_tax_ott}{Character string path for organisms taxonomy (OTT) file}

\item{output_str_stereo}{Character string path for structures stereochemistry file}

\item{output_str_met}{Character string path for structures metadata file}

\item{output_str_nam}{Character string path for structures names file}

\item{output_str_tax_cla}{Character string path for ClassyFire taxonomy file}

\item{output_str_tax_npc}{Character string path for NPClassifier taxonomy file}
}
\value{
Character string path to the prepared merged SOP library
}
\description{
This function merges all structure-organism pair libraries
(LOTUS, HMDB, ECMDB, etc.) into a single comprehensive library. Can
optionally filter by taxonomic level to create biologically-focused
subsets. Also splits structures into separate metadata tables.
}
\details{
Creates merged library by combining all available SOP sources,
optionally filtering by taxonomic criteria (e.g., only Gentianaceae).
Splits output into structures metadata, names, taxonomy, and organisms.
}
\examples{
\dontrun{
copy_backbone()
go_to_cache()
github <- "https://raw.githubusercontent.com/"
repo <- "taxonomicallyinformedannotation/tima-example-files/main/"
dir <- paste0(github, repo)
files <- get_params(step = "prepare_libraries_sop_merged")$files$libraries$sop$prepared$lotus |>
  gsub(pattern = ".gz", replacement = "", fixed = TRUE)
get_file(url = paste0(dir, files), export = files)
prepare_libraries_sop_merged(files = files)
unlink("data", recursive = TRUE)
}
}
